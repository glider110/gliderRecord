### 怎样开展：**

- **微重构部分**

  - [ ] 搭建date_process模块，工厂模式实现各传感器处理功能；

    [**初版架构**](https://www.yuque.com/guoxiaofan-vrtlz/ayng78/wp4eo2m2oob540zg)


  - [ ] 明确边界感，对接sensor、obstacle、avoid_oba的接口

    | **输入** | **消息名称**                               | 消息类型                                |
    | -------- | ------------------------------------------ | --------------------------------------- |
    |          | 点云（主激光雷达、避障激光雷达、避障相机） | `sros::core::base_msg_ptr`              |
    |          | 检测框（多个BOX）                          | `SpaceRange3DS`                         |
    |          | 传感器外参                                 |                                         |
    |          | 机器的位姿                                 | `std::shared_ptr<slam::tf::TFOperator>` |
    | **输出** | 障碍点信息（基于车体）                     | `std::shared_ptr<ObstacleMsg>`          |
    |          | 障碍点信息（基于地图）                     | `std::shared_ptr<ObstacleMsg>`          |


  - [ ] 旧版本的算法迁移，激光雷达→避障相机→感知相机特定场景避障；


  - [ ] 测试各个功能模块和老版评估（需测试协助）；




- **避障升级部分**

  - [ ] 新功能的开发基于PCL来开发一些滤波功能，利用原生生数据结构来加快处理(kd/octree)


  - [ ] 添加点云识别模块（叉臂、栈板、悬崖），实现自适应滤除而舍掉上层一下动态模型生成；


  - [ ] 感知模块融合识别；

    ​				

- **公共开发部分**
  - [ ] 交互和可视化
  - [ ] 调试、离线测试数据集



### **需要问的？**


- [ ] avoid_oba 简要简介这部分功能及原理；
- [ ] 业务与算法分离，避障模型转换为BOX形式；



**避障雷达重构**



**主副雷达重构**



**感知相机重构**



TODO LIST:

- [ ] 避障激光雷达的激光名获取，主要用在方位判断   
- [ ] TOPIC_BACK_LASER_ENABLE_PUBLISH
- [ ] filterLowIntenPoints   编译问题  链接错误 



激光处理模块（定位 避障  R2000）为什么要分开写：

- [ ] 初始化参数又会臃肿一起放在里面
- [ ] 算法放在一个文件 反而复杂了 
- [ ] 数据类型不一致 



#### 避障2.X评审项

**前端:**

- [ ] 3D避障模型和避障区域颜色区分;
- [ ] 点击状态栏的避障源把3D避障显示窗口弹在主地图界面;
- [ ] 避障源红绿蓝颜色标注;

**后端:**

- [ ] 避障2.0生效的参数添加标识区别清楚
- [ ] 点云处理添加新的动态检测参数(检测区域/自定义区域);
- [ ] 避障模型实时预测;
- [ ] 有效点云与地图绑定的高度过滤功能;

**日志分析工具:**

- [x] 基于二维车体模型的障碍点分布;
- [ ] 避障区域生成;
- [ ] 三维避障显示;
- [ ] 通过多去时间戳来选择指定时间段的避障信息;
- [ ] 通过MANUAL_RUNNING => MANUAL_PAUSED 这个急停信号来画出急停点









缺陷:货架切换问题不是很准









